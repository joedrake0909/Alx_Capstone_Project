{% extends "base.html" %}
{% block content %}
<!-- Action Bar -->
<div class="d-flex justify-content-between align-items-center mb-4 bg-white p-3 rounded shadow-sm">
    <div>
        <h4 class="fw-bold mb-0">{{ member.full_name }}'s Ledger</h4>
        <small class="text-muted">ID: {{ member.member_id }} | Group Rate: {{ member.group.fixed_deposit_amount }} GHS</small>
    </div>
    
    <div class="d-flex gap-2">
        <a href="{% url 'record_entry' member.id %}?page={{ current_page.page_number }}" 
           class="btn btn-primary btn-lg px-4 shadow-sm">
            <i class="fas fa-plus-circle me-2"></i> New Transaction
        </a>
    </div>
</div>

<div style="margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center;">
    <div>
        <p style="color: #64748b; margin: 5px 0 0;">Book #{{ member.digital_book.book_number }} | Page {{ current_page.page_number }}</p>
    </div>
    <div style="display: flex; gap: 8px;">
        <a href="?page=1" style="text-decoration: none; padding: 8px 16px; background: #e2e8f0; border-radius: 6px; color: #1e293b; font-size: 0.85rem;">Page 1</a>
        <a href="?page=2" style="text-decoration: none; padding: 8px 16px; background: #e2e8f0; border-radius: 6px; color: #1e293b; font-size: 0.85rem;">Page 2</a>
    </div>
</div>

<div style="background: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
        <thead>
            <tr style="background: #f8fafc; border-bottom: 2px solid #e2e8f0;">
                <th style="padding: 12px; width: 50px; text-align: center; border-right: 1px solid #e2e8f0;">No.</th>
                <th style="padding: 12px; text-align: left; width: 140px;">Date</th>
                <th style="padding: 12px; text-align: left;">Deposit</th>
                <th style="padding: 12px; text-align: left;">Withdrawal</th>
                <th style="padding: 12px; text-align: left;">Balance</th>
                <th style="padding: 12px; text-align: right; padding-right: 20px;">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
            <tr style="border-bottom: 1px solid #f1f5f9; height: 48px;">
                <td style="text-align: center; border-right: 1px solid #e2e8f0; background: #fcfcfc; font-weight: 600; color: #64748b;">{{ row.number }}</td>
                {% if row.data %}
                    <td style="padding-left: 12px;">{{ row.data.date|date:"d/m/Y" }}</td>
                    <td style="padding-left: 12px; color: #16a34a; font-weight: 600;">
                        {% if row.data.deposit_amount > 0 %}+{{ row.data.deposit_amount }}{% else %}0.00{% endif %}
                    </td>
                    <td style="padding-left: 12px; color: #dc2626;">
                        {% if row.data.withdrawal_amount > 0 %}-{{ row.data.withdrawal_amount }}{% else %}0.00{% endif %}
                    </td>
                    <td style="padding-left: 12px; font-weight: 700;">{{ row.data.current_balance }}</td>
                    <td style="text-align: right; padding-right: 20px;">
                        <span style="background: #dcfce7; color: #166534; padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;">
                            {{ row.data.status }}
                        </span>
                    </td>
                {% else %}
                    <td style="padding-left: 12px; color: #cbd5e1;">--/--/--</td>
                    <td style="padding-left: 12px; color: #cbd5e1;">0.00</td>
                    <td style="padding-left: 12px; color: #cbd5e1;">0.00</td>
                    <td style="padding-left: 12px; color: #cbd5e1;">0.00</td>
                    <td style="text-align: right; padding-right: 20px; color: #cbd5e1;">EMPTY</td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}